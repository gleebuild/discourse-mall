<% content_for :title do %>商城 - Mall<% end %>
<div class="mall-index" style="max-width:1200px;margin:0 auto;padding:1rem;">
  <h2>商城</h2>
  <div class="grid" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;">
    <style>
      @media (min-width: 900px){ .grid{ grid-template-columns:repeat(4,1fr);} }
      .card{border:1px solid #e5e5e5;border-radius:10px;overflow:hidden;background:#fff}
      .card img{width:100%;height:180px;object-fit:cover}
      .card .bd{padding:10px}
      .price{font-weight:bold}
    </style>
    <% @products.each do |p| %>
      <a class="card" href="/mall/p/<%= p.id %>">
        <% if p.image_url.present? %>
          <img src="<%= p.image_url %>" alt="<%= p.title %>"/>
        <% else %>
          <div style="height:180px;display:flex;align-items:center;justify-content:center;color:#888">No Image</div>
        <% end %>
        <div class="bd">
          <div class="tt"><%= p.title %></div>
          <div class="price"><%= (p.price_cents || 0)/100.0 %> <%= p.currency || "CNY" %></div>
        </div>
      </a>
    <% end %>
  </div>
</div>
